server:
  port: ${PORT:5002}

spring:
  application:
    name: microReservas

  datasource:
    url: ${RESERVAS_DB_URL}
    username: ${RESERVAS_DB_USER}
    password: ${RESERVAS_DB_PASS}
    driver-class-name: org.postgresql.Driver

  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
        implicit-strategy: org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
    properties:
      hibernate:
        format_sql: true

  # ==========================================
  # üîå 1. CONFIGURACI√ìN DE CONEXI√ìN (Est√°ndar)
  # Esto DEBE ir dentro de 'spring' para que
  # ConnectionFactory funcione autom√°ticamente.
  # ==========================================
  rabbitmq:
    host: ${SPRING_RABBITMQ_HOST:rabbitmq.railway.internal}
    port: ${SPRING_RABBITMQ_PORT:5672}
    username: ${SPRING_RABBITMQ_USERNAME:guest}
    password: ${SPRING_RABBITMQ_PASSWORD:guest}
    virtual-host: /

# ==========================================
# üê∞ 2. CONFIGURACI√ìN PERSONALIZADA (Tu Java)
# Esto va FUERA de 'spring' (a la izquierda)
# para que coincida con @Value("${rabbitmq.queue.name}")
# ==========================================
rabbitmq:
  queue:
    name: ${RABBITMQ_QUEUE_NAME:cola.reservas.notificaciones}

# ============================
# üîó CLIENTES REST
# ============================
clients:
  usuarios:
    base-url: ${CLIENTS_USUARIOS_BASE_URL}
  barberos:
    base-url: ${CLIENTS_BARBEROS_BASE_URL}

stripe:
  api:
    key: ${STRIPE_API_KEY}
  currency: ${STRIPE_CURRENCY}